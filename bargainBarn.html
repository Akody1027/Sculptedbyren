<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Lyliaâ€™s Bargain Barn</title>

  <!-- Facebook SDK -->
  <div id="fb-root"></div>
  <script async defer crossorigin="anonymous"
    src="https://connect.facebook.net/en_US/sdk.js#xfbml=1&version=v16.0">
  </script>

  <style>
    * { box-sizing: border-box; margin:0; padding:0 }
    body { font-family:sans-serif; background:#fafafa; color:#333 }
    .container { max-width:900px; margin:0 auto; padding:1rem }
    h1, h2 { text-align:center; margin-bottom:0.75rem }
    .live-container, .videos { margin-bottom:2rem }
    .video-grid {
      display:grid;
      grid-template-columns:repeat(auto-fill, minmax(260px,1fr));
      gap:1rem;
    }
    .video-placeholder {
      width:100%; height:0;
      padding-bottom:56.25%; /* 16:9 ratio */
      position:relative;
    }
    .video-placeholder .fb-video {
      position:absolute; top:0; left:0; width:100%; height:100%;
    }
  </style>
</head>
<body>

  <div class="container">

    <!-- LIVE SECTION -->
    <section id="liveContainer" class="live-container">
      <h1>ðŸ“¡ Live Now</h1>
      <div class="fb-video"
           data-href="https://www.facebook.com/LyliasBargainBarn/live/1AcugUjrRS"
           data-width="auto"
           data-show-text="false"
           data-autoplay="true">
      </div>
    </section>

    <!-- OTHER VIDEOS (lazy-load & autoplay on scroll) -->
    <section class="videos">
      <h2>ðŸŽ¥ All Videos</h2>
      <div id="videoGrid" class="video-grid"></div>
    </section>

  </div>

  <script>
    // 1) List all your other video URLs here:
    const otherVideos = [
      // "https://www.facebook.com/LyliasBargainBarn/videos/1234567890/",
      // "https://www.facebook.com/LyliasBargainBarn/videos/0987654321/",
      // â€¦etcâ€¦
    ];

    // 2) Build placeholders
    const grid = document.getElementById('videoGrid');
    otherVideos.forEach(url => {
      const placeholder = document.createElement('div');
      placeholder.className = 'video-placeholder';
      placeholder.dataset.href = url;
      grid.appendChild(placeholder);
    });

    // 3) IntersectionObserver to load & autoplay when visible
    const io = new IntersectionObserver((entries, obs) => {
      entries.forEach(entry => {
        if (!entry.isIntersecting) return;
        const ph = entry.target;
        const vidDiv = document.createElement('div');
        vidDiv.className = 'fb-video';
        vidDiv.setAttribute('data-href', ph.dataset.href);
        vidDiv.setAttribute('data-width', 'auto');
        vidDiv.setAttribute('data-show-text', 'false');
        vidDiv.setAttribute('data-autoplay', 'true');
        ph.appendChild(vidDiv);
        // parse just this new video
        FB.XFBML.parse(ph);
        obs.unobserve(ph);
      });
    }, { rootMargin: '0px 0px -20px 0px' });

    // wait for FB SDK to init, then observe
    window.fbAsyncInit = () => {
      FB.init({ xfbml:true, version:'v16.0' });
      document.querySelectorAll('.video-placeholder')
              .forEach(el => io.observe(el));

      // 4) Hide liveContainer if no live iframe appeared
      setTimeout(() => {
        const live = document.getElementById('liveContainer');
        if (!live.querySelector('iframe')) {
          live.innerHTML = '<h1>ðŸ“¡ Live coming soonâ€¦</h1>';
        }
      }, 2000);
    };
  </script>

</body>
</html>
