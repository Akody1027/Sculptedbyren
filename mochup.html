<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <!-- Responsive on mobile -->
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>T-Shirt Mockup Creator</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      padding: 10px;
      margin: 0;
      box-sizing: border-box;
    }
    .container {
      max-width: 600px;
      width: 100%;
      margin: auto;
    }
    input[type="file"], button {
      width: 100%;
      margin: 10px 0;
      padding: 12px;
      font-size: 16px;
      box-sizing: border-box;
    }
    .controls {
      display: flex;
      flex-direction: column;
      gap: 8px;
      margin: 10px 0;
    }
    .control-group {
      text-align: left;
    }
    .control-group label {
      display: block;
      font-size: 14px;
      margin-bottom: 4px;
    }
    .control-group input[type="range"] {
      width: 100%;
    }
    canvas {
      width: 100%;
      height: auto;
      border: 1px solid #ccc;
      display: block;
      margin: 10px auto;
    }
    button {
      background: #007bff;
      color: #fff;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }
    button:active {
      opacity: 0.9;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>T-Shirt Mockup Creator</h1>

    <label for="mockup-input">1. Select T-shirt mockup image:</label>
    <input type="file" id="mockup-input" accept="image/*">

    <label for="design-input">2. Select design PNG:</label>
    <input type="file" id="design-input" accept="image/png">

    <div class="controls">
      <div class="control-group">
        <label for="scale-range">Scale (Size): <span id="scale-val">0.70</span></label>
        <input type="range" id="scale-range" min="0.1" max="2" step="0.01" value="0.7">
      </div>
      <div class="control-group">
        <label for="offset-x-range">X Offset (%): <span id="offset-x-val">0</span></label>
        <input type="range" id="offset-x-range" min="-50" max="50" step="1" value="0">
      </div>
      <div class="control-group">
        <label for="offset-y-range">Y Offset (%): <span id="offset-y-val">0</span></label>
        <input type="range" id="offset-y-range" min="-50" max="50" step="1" value="0">
      </div>
    </div>

    <canvas id="mockup-canvas"></canvas>

    <button id="download-btn">Download Mockup</button>
  </div>

  <script>
    const canvas = document.getElementById('mockup-canvas');
    const ctx = canvas.getContext('2d');

    let bgImg = new Image();
    let designImg = null;

    // controls
    const scaleRange = document.getElementById('scale-range');
    const offsetXRange = document.getElementById('offset-x-range');
    const offsetYRange = document.getElementById('offset-y-range');
    const scaleVal  = document.getElementById('scale-val');
    const offsetXVal= document.getElementById('offset-x-val');
    const offsetYVal= document.getElementById('offset-y-val');

    // draw both images
    function drawCanvas() {
      if (!bgImg.src) return;
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      ctx.drawImage(bgImg, 0, 0, canvas.width, canvas.height);

      if (designImg) {
        const scale = parseFloat(scaleRange.value);
        const w = designImg.width * scale;
        const h = designImg.height * scale;

        // center + offsets
        const xOff = parseInt(offsetXRange.value)/100 * canvas.width;
        const yOff = parseInt(offsetYRange.value)/100 * canvas.height;
        const x = (canvas.width - w)/2 + xOff;
        const y = (canvas.height - h)/2 + yOff;

        ctx.drawImage(designImg, x, y, w, h);
      }
    }

    // update label displays
    function updateLabels() {
      scaleVal.textContent   = parseFloat(scaleRange.value).toFixed(2);
      offsetXVal.textContent = offsetXRange.value;
      offsetYVal.textContent = offsetYRange.value;
    }

    // file loaders
    document.getElementById('mockup-input').addEventListener('change', e => {
      const file = e.target.files[0];
      if (!file) return;
      bgImg = new Image();
      bgImg.onload = () => {
        canvas.width  = bgImg.width;
        canvas.height = bgImg.height;
        drawCanvas();
      };
      bgImg.src = URL.createObjectURL(file);
    });

    document.getElementById('design-input').addEventListener('change', e => {
      const file = e.target.files[0];
      if (!file) return;
      designImg = new Image();
      designImg.onload = () => {
        updateLabels();
        drawCanvas();
      };
      designImg.src = URL.createObjectURL(file);
    });

    // slider events
    [scaleRange, offsetXRange, offsetYRange].forEach(range => {
      range.addEventListener('input', () => {
        updateLabels();
        drawCanvas();
      });
    });

    // download
    document.getElementById('download-btn').addEventListener('click', () => {
      const link = document.createElement('a');
      link.download = 'tshirt-mockup.png';
      link.href = canvas.toDataURL('image/png');
      link.click();
    });

    // init labels
    updateLabels();
  </script>
</body>
</html>
