<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Advanced Mega Millions Generator</title>
  <style>
    /* ---------- Reset & Theme ---------- */
    *{box-sizing:border-box;margin:0;padding:0}
    body{font-family:Arial,Helvetica,sans-serif;background:#f5f5f5;color:#333;line-height:1.4}
    .container{width:92%;max-width:820px;margin:24px auto;padding:22px;background:#fff;border-radius:12px;box-shadow:0 4px 14px rgba(0,0,0,.1)}
    h1{text-align:center;font-size:1.9rem;margin-bottom:24px}
    button{display:block;margin:0 auto;padding:13px 28px;font-size:1rem;border:none;border-radius:6px;background:#444;color:#fff;cursor:pointer;transition:.25s all;box-shadow:0 3px 6px rgba(0,0,0,.2)}
    button:hover{background:#333}button:active{transform:translateY(2px)}

    /* Balls */
    .numbers{display:flex;justify-content:center;flex-wrap:wrap;gap:10px;margin:26px 0}
    .ball{width:62px;height:62px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:1.2em;font-weight:700;border:2px solid #ccc;transition:transform .3s,box-shadow .3s}
    .ball:hover{transform:scale(1.1);box-shadow:0 4px 10px rgba(0,0,0,.25)}
    .white{background:#fff;color:#333}
    .mega{background:#ffd500;border-color:#e6c200;color:#333}

    /* Dropdown */
    details{margin-top:32px;border-top:1px solid #ddd;padding-top:16px}
    details summary{font-size:1.1rem;cursor:pointer;list-style:none;display:flex;align-items:center;gap:6px}
    details summary::after{content:"▸";transition:.3s transform;margin-left:4px}
    details[open] summary::after{transform:rotate(90deg)}

    /* Info */
    .info h2{font-size:1.2rem;margin:10px 0 6px}
    .info ul{margin-left:20px;margin-bottom:12px}

    /* Heatmap */
    .heatmap-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(34px,1fr));gap:8px;margin-top:14px}
    .heat-ball{width:34px;height:34px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:.75em;color:#333;transition:transform .3s}
    .heat-ball:hover{transform:scale(1.25)}
  </style>
</head>
<body>
  <div class="container">
    <h1>Advanced Mega Millions Generator</h1>
    <button id="generateBtn">Generate Numbers</button>
    <div id="numbers" class="numbers"></div>

    <details id="dataDropdown">
      <summary>Drawing Data</summary>
      <div id="info" class="info"></div>
      <div id="heatmap" class="heatmap-grid"></div>
    </details>
  </div>

  <script>
    /* —— Weighted probability arrays (draws from 2017‑10‑28 through 2025‑04‑22) —— */
    const whiteProbs = [0,0.014787,0.013809,0.018619,0.014272,0.013818,0.014839,0.013410,0.016842,0.013278,0.020060,0.013514,0.015455,0.013818,0.018793,0.014569,0.018589,0.017687,0.015946,0.017587,0.016105,0.020112,0.015987,0.020410,0.020683,0.014924,0.013790,0.019604,0.017940,0.013579,0.019284,0.018731,0.016502,0.018849,0.015321,0.011907,0.013045,0.011367,0.013788,0.015092,0.016345,0.016512,0.015073,0.016981,0.015843,0.015514,0.015966,0.012983,0.017224,0.014399,0.014132,0.014782,0.017532,0.015670,0.013551,0.016911,0.017042,0.016734,0.014214,0.014862,0.017103,0.016238,0.015784,0.012456,0.011321,0.013754,0.013962,0.014830,0.015201,0.014039,0.015892,0.014610,0.012983,0.015847];

    const megaProbs  = [0,0.048898,0.041254,0.044475,0.037696,0.020903,0.036731,0.036940,0.033978,0.037983,0.037304,0.029005,0.033622,0.036755,0.032109,0.045812,0.033242,0.033817,0.031297,0.035664,0.040122,0.028884,0.027602,0.031280,0.025865,0.022951];

    /* —— Statistical summary —— */
    const summary = {
      maxDate:'2025-04-22',meanSum:173.67,stdSum:44.64,within1StdPct:67.73,
      topWhites:[{num:10,prob:0.02006},{num:17,prob:0.01879},{num:3,prob:0.01862},{num:31,prob:0.01859},{num:15,prob:0.01769}],
      topPairs:[[10,17],[10,20],[39,42],[2,31],[15,32]],
      topTriplets:[[30,35,66],[6,37,46],[10,38,43],[14,48,58],[23,24,43]],
      oddDist:{0:3.33,1:16.13,2:33.16,3:30.99,4:14.08,5:2.30},
      highDist:{0:3.71,1:16.26,2:33.42,3:30.99,4:13.96,5:1.66}
    };

    /* —— Helper functions —— */
    function weightedSample(arr){const tot=arr.reduce((s,v)=>s+v,0);let r=Math.random()*tot,c=0;for(let i=0;i<arr.length;i++){c+=arr[i];if(r<c)return i;}return arr.length-1;}
    function weightedSampleNoRep(arr,count){let items=arr.map((w,i)=>({i,w})).slice(1),picked=[];for(let k=0;k<count;k++){const tot=items.reduce((s,x)=>s+x.w,0);let r=Math.random()*tot,c=0;for(let j=0;j<items.length;j++){c+=items[j].w;if(r<c){picked.push(items[j].i);items.splice(j,1);break;}}}return picked;}

    /* —— Render functions —— */
    function generateNumbers(){const btn=document.getElementById('generateBtn');btn.textContent='Generating…';const whites=weightedSampleNoRep(whiteProbs,5).sort((a,b)=>a-b);const mega=weightedSample(megaProbs);const wrap=document.getElementById('numbers');wrap.innerHTML='';whites.forEach(n=>{const d=document.createElement('div');d.className='ball white';d.textContent=n;wrap.appendChild(d);});const mb=document.createElement('div');mb.className='ball mega';mb.textContent=mega;wrap.appendChild(mb);renderInfo();renderHeatmap();btn.textContent='Generate Numbers';}

    function renderInfo(){const n=document.getElementById('info');n.innerHTML=`<h2>Patterns & Statistics</h2><p><strong>Data through:</strong> ${summary.maxDate}</p><p><strong>White‑ball sum μ±σ:</strong> ${summary.meanSum} ± ${summary.stdSum} (${summary.within1StdPct}% of draws)</p><ul><li><strong>Top whites:</strong> ${summary.topWhites.map(w=>w.num+` (${(w.prob*100).toFixed(2)}%)`).join(', ')}</li><li><strong>Top pairs:</strong> ${summary.topPairs.map(p=>'['+p.join(', ')+']').join(', ')}</li><li><strong>Top triplets:</strong> ${summary.topTriplets.map(t=>'['+t.join(', ')+']').join(', ')}</li></ul><p><strong>Odd/Even:</strong> ${Object.entries(summary.oddDist).map(([o,p])=>`${o} odd → ${p}%`).join(' • ')}</p><p><strong>High/Low (&gt;35):</strong> ${Object.entries(summary.highDist).map(([h,p])=>`${h} high → ${p}%`).join(' • ')}</p><p style="font-size:.8em;color:#555"><em>Algorithm:</em> weight = frequency × exp(−daysSinceLastDraw/365). No guarantee of winning.</p>`;}

    function renderHeatmap(){const grid=document.getElementById('heatmap');grid.innerHTML='';const vals=whiteProbs.slice(1),max=Math.max(...vals),min=Math.min(...vals);vals.forEach((v,idx)=>{const norm=(v-min)/(max-min);const light=88-60*norm;const ball=document.createElement('div');ball.className='heat-ball';ball.textContent=idx+1;ball.style.background=`hsl(0,100%,${light}%)`;ball.title=`#${idx+1}: ${(v*100).toFixed(2)}%`;grid.appendChild(ball);});}

    document.getElementById('generateBtn').addEventListener('click',generateNumbers);

    // Initial info & heatmap
    renderInfo();renderHeatmap();
  </script>
</body>
</html>
