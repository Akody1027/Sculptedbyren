<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Smart Mega Millions Generator</title>
  <link href="https://fonts.googleapis.com/css?family=Roboto:400,500&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Roboto', sans-serif;
      margin: 0;
      padding: 2rem;
      background: #fafafa;
      color: #333;
      max-width: 600px;
      margin-left: auto;
      margin-right: auto;
    }
    h1 {
      text-align: center;
      color: #4a90e2;
    }
    #output {
      font-size: 2.5rem;
      text-align: center;
      margin: 1rem 0;
      color: #4a90e2;
      letter-spacing: .5rem;
    }
    button {
      display: block;
      margin: 0 auto 2rem;
      background: #4a90e2;
      color: white;
      border: none;
      padding: .75rem 1.5rem;
      font-size: 1rem;
      border-radius: 25px;
      cursor: pointer;
    }
    button:hover {
      background: #357ab8;
    }
    .info {
      background: white;
      padding: 1rem;
      border-radius: 8px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.05);
      line-height: 1.5;
    }
    .info h2 {
      margin-top: 0;
      color: #4a90e2;
    }
    .info p, .info ul {
      margin: .5rem 0;
    }
  </style>
</head>
<body>

  <h1>Smart Mega Millions Generator</h1>

  <button onclick="generate()">Generate Numbers</button>
  <div id="output">-- -- -- -- -- --</div>

  <div class="info" id="explanation">
    <h2>Click “Generate” to see your numbers</h2>
    <p>Each set respects the most common patterns in past draws:</p>
    <ul>
      <li>**3 Even / 3 Odd** split</li>
      <li>**Sum** in the 155–195 range (ideal 175–185)</li>
      <li>At least **one consecutive pair**</li>
      <li>At least one of the top **clustered pairs** (17&32, 23&44, 49&12)</li>
      <li>**Weighted** toward the “hot” numbers: 17, 23, 32, 44, 49, 12</li>
    </ul>
  </div>

  <script>
    // frequencies from historical tallies (only top-6 listed; others default to 100)
    const frequencies = { 12:146, 17:163, 23:158, 32:154, 44:151, 49:149 };
    const hotPairs = [[17,32],[23,44],[49,12]];

    function weightedDraw(pool) {
      // pool: [{n: number, w: weight}, …]
      const total = pool.reduce((sum,p)=>sum+p.w, 0);
      let r = Math.random() * total, acc = 0;
      for (let p of pool) {
        acc += p.w;
        if (r <= acc) return p.n;
      }
      return pool[pool.length-1].n;
    }

    function generateOne() {
      // build candidate six‐number set
      let available = Array.from({length:56}, (_,i)=>i+1);
      let picks = [];
      for (let i=0; i<6; i++) {
        const pool = available.map(n => ({
          n,
          w: frequencies[n] || 100
        }));
        const choice = weightedDraw(pool);
        picks.push(choice);
        available = available.filter(n => n !== choice);
      }
      return picks.sort((a,b)=>a-b);
    }

    function meetsCriteria(p) {
      const even = p.filter(n=>n%2===0).length;
      if (even !== 3) return false;
      const sum = p.reduce((a,b)=>a+b,0);
      if (sum < 155 || sum > 195) return false;
      const hasConsec = p.some((n,i)=>i>0 && n - p[i-1] === 1);
      if (!hasConsec) return false;
      const hasCluster = hotPairs.some(pair =>
        pair.every(x => p.includes(x))
      );
      if (!hasCluster) return false;
      return true;
    }

    function scoreCriteria(p) {
      let score = 50; // base confidence
      // +10 for each satisfied rule
      const even = p.filter(n=>n%2===0).length;
      if (even === 3) score += 10;
      const sum = p.reduce((a,b)=>a+b,0);
      if (sum >= 175 && sum <= 185) score += 10;
      if (sum >= 155 && sum <= 195) score += 5;
      if (p.some((n,i)=>i>0 && n - p[i-1] === 1)) score += 10;
      if (hotPairs.some(pair => pair.every(x=>p.includes(x)))) score += 10;
      // +5 for each of the six “hottest” numbers included
      const hotCount = [12,17,23,32,44,49].filter(x=>p.includes(x)).length;
      score += hotCount * 5;
      return Math.min(score, 100);
    }

    function generate() {
      let picks, tries=0;
      do {
        picks = generateOne();
        tries++;
      } while (!meetsCriteria(picks) && tries < 2000);

      const sum = picks.reduce((a,b)=>a+b,0);
      const even = picks.filter(n=>n%2===0).length;
      const consecPairs = picks
        .map((n,i)=> i>0 && n - picks[i-1] === 1 ? `${picks[i-1]}-${n}` : null)
        .filter(x=>x);
      const clusterHits = hotPairs
        .filter(pair => pair.every(x=>picks.includes(x)))
        .map(pair=>`${pair[0]} & ${pair[1]}`);

      const conf = scoreCriteria(picks);

      document.getElementById('output').textContent = picks.join('  ');
      document.getElementById('explanation').innerHTML = `
        <h2>Your Generated Set</h2>
        <p><strong>${picks.join('  ')}</strong> &nbsp; (sum = ${sum})</p>
        <h3>Why these?</h3>
        <ul>
          <li><strong>Even/Odd:</strong> ${even} even, ${6-even} odd</li>
          <li><strong>Sum:</strong> ${sum} (${sum>=155&&sum<=195? 'in range' : 'out of range'})</li>
          <li><strong>Consecutive:</strong> ${consecPairs.length ? consecPairs.join(', ') : 'none'}</li>
          <li><strong>Cluster Pair:</strong> ${clusterHits.length ? clusterHits.join('; ') : 'none'}</li>
          <li><strong>Hot Numbers:</strong> ${hotCount = [12,17,23,32,44,49].filter(x=>picks.includes(x)).join(', ') || 'none'}</li>
        </ul>
        <p><strong>Confidence:</strong> ${conf}%</p>
        <p><small>No guarantee of a win—this is a data-driven suggestion based on historical patterns.</small></p>
      `;
    }
  </script>

</body>
</html>
