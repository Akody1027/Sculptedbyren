<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Mega Millions Smart Generator (2017-Now)</title>
  <style>
    :root{
      --white-ball:#f9f9f9;
      --white-border:#d0d0d0;
      --mega-ball:#fff7c7;
      --brand:#6c63ff;
    }
    body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,sans-serif;margin:0;background:#fafbff;color:#333;display:flex;flex-direction:column;align-items:center;gap:2rem;padding:2rem;}
    h1,h2{margin:0;text-align:center;color:var(--brand);} 
    button{background:var(--brand);color:#fff;border:none;padding:0.75rem 1.5rem;border-radius:0.75rem;font-size:1rem;cursor:pointer;box-shadow:0 4px 8px rgba(0,0,0,.15);transition:transform .15s;}
    button:hover{transform:translateY(-2px);}button:disabled{opacity:.5;cursor:progress;}
    #numbers{display:flex;gap:.5rem;justify-content:center;align-items:center;margin:1rem 0;flex-wrap:wrap;}
    .ball{width:3rem;height:3rem;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:600;font-size:1.1rem;box-shadow:0 2px 6px rgba(0,0,0,.1);}
    .white{background:var(--white-ball);border:2px solid var(--white-border);} .mega{background:var(--mega-ball);border:2px solid #ffe88d;}
    /* heat-map */
    #heatGrid{display:grid;grid-template-columns:repeat(6,3rem);gap:.5rem;justify-content:center;}
    .heatBall{width:3rem;height:3rem;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:.9rem;font-weight:500;color:#333;border:1px solid #ccc;box-shadow:0 1px 3px rgba(0,0,0,.07);}
    /* docs */
    summary{cursor:pointer;font-weight:600;color:var(--brand);}details{max-width:900px;text-align:left;background:#fff;border-radius:1rem;padding:1rem;box-shadow:0 2px 8px rgba(0,0,0,.08);}table{border-collapse:collapse;width:100%;margin-top:1rem;}th,td{padding:.4rem .6rem;border:1px solid #e2e2e2;text-align:center;}th{background:#f1f2ff;}
  </style>
</head>
<body>
  <h1>Mega Millions Advanced Number Generator</h1>
  <section id="genSection">
    <h2>Pick Set</h2>
    <div id="numbers"></div>
    <button id="generateBtn">Generate Numbers</button>
    <p id="status" style="min-height:1.2rem"></p>
  </section>

  <section id="heatSection">
    <h2>Mega Ball Heat-Map (Draws since 2017-10-31)</h2>
    <div id="heatGrid"></div>
  </section>

  <section id="docs">
    <h2>Methodology & Quick Stats</h2>
    <details>
      <summary>Open full data snapshot</summary>
      <ul>
        <li>Dataset: 781 draws (Oct 31 2017 → Apr 22 2025).</li>
        <li>White-ball Top 5: 10 (73), 3 (72), 31 (70), 17 (68), 14 (68).</li>
        <li>Mega-Ball Top 3: 22 (44), 11 (40), 18 (39).</li>
        <li>Odd–even sweet-spot: 2/3 or 3/2 (≈ 64 % of draws).</li>
        <li>Typical sum band: 140 – 195 (middle 50 %).</li>
        <li>Generator weights by frequency, validates odd/even mix and sum before finalizing.</li>
      </ul>
      <h3>White-ball Frequencies (Top 20)</h3>
      <table>
        <thead><tr><th>Number</th><th>Hits</th></tr></thead>
        <tbody id="whiteFreqTable"></tbody>
      </table>
      <h3>Mega-Ball Frequencies</h3>
      <table>
        <thead><tr><th>Number</th><th>Hits</th></tr></thead>
        <tbody id="megaFreqTable"></tbody>
      </table>
    </details>
  </section>

<script>
/* === Data from analysis (Oct 31 2017 → Apr 22 2025) === */
const whiteFreq = [56,52,72,57,50,54,55,66,50,73,60,57,60,68,61,53,68,49,52,64,55,63,46,48,46,45,55,47,52,55,70,57,45,44,48,40,53,52,42,38,41,55,43,54,50,49,45,55,52,53,39,45,51,48,47,39,47,43,48,47,46,46,45,61,45,40,56,62,55,42];
const megaFreq  = [33,28,31,35,22,27,27,24,35,28,40,28,39,29,26,27,29,39,31,29,27,44,24,38];
const whiteTotalDraws = 781;
const megaTotalDraws  = 781;
/* === Utility functions === */
function weightedRandom(weights){
  const cum = [];
  let s=0;weights.forEach(w=>{s+=w;cum.push(s);});
  const r=Math.random()*s;
  return cum.findIndex(v=>v>r);
}
function generateSet(){
  let whiteSet=new Set();
  let attempts=0;
  while(true){
    attempts++;
    whiteSet.clear();
    while(whiteSet.size<5){
      const pick = weightedRandom(whiteFreq)+1; // 1-70
      whiteSet.add(pick);
    }
    const whiteArr=[...whiteSet].sort((a,b)=>a-b);
    const sum=whiteArr.reduce((a,b)=>a+b,0);
    const odds=whiteArr.filter(n=>n%2).length;
    const evens=5-odds;
    if((odds===2||odds===3)&&sum>=140&&sum<=195){
      const mega = weightedRandom(megaFreq)+1; // 1-24 (≤24 after 2025-04-05)
      return {white:whiteArr,mega};
    }
    if(attempts>100) return null; // fallback
  }
}
/* === UI Build === */
const numbersDiv=document.getElementById('numbers');
const btn=document.getElementById('generateBtn');
const status=document.getElementById('status');
btn.addEventListener('click',()=>{
  btn.disabled=true;status.textContent='Generating…';
  setTimeout(()=>{
    const res=generateSet();
    numbersDiv.innerHTML='';
    if(res){
      res.white.forEach(n=>{
        const b=document.createElement('div');
        b.textContent=n;b.className='ball white';numbersDiv.appendChild(b);
      });
      const mb=document.createElement('div');mb.textContent=res.mega;mb.className='ball mega';numbersDiv.appendChild(mb);
      status.textContent=`Odd/Evens OK · Sum ${res.white.reduce((a,b)=>a+b,0)}`;
    }else{
      status.textContent='Could not satisfy constraints after 100 tries.';
    }
    btn.disabled=false;
  },150);
});
/* === Heat-map === */
const maxMega=Math.max(...megaFreq),minMega=Math.min(...megaFreq);
function pastelScale(v){
  // interpolate lightness 90→60 based on freq
  const light=90-((v-minMega)/(maxMega-minMega))*30;
  return `hsl(200,70%,${light}%)`;
}
const heatGrid=document.getElementById('heatGrid');
megaFreq.forEach((f,i)=>{
  const hb=document.createElement('div');
  hb.className='heatBall';
  hb.textContent=i+1;
  hb.style.background=pastelScale(f);
  heatGrid.appendChild(hb);
});
/* === Docs tables === */
function buildFreqTable(freqArr,tbody){
  freqArr.forEach((f,i)=>{
    const tr=document.createElement('tr');
    tr.innerHTML=`<td>${i+1}</td><td>${f}</td>`;
    tbody.appendChild(tr);
  });
}
buildFreqTable(whiteFreq.slice().map((v,i)=>[i+1,v]).sort((a,b)=>b[1]-a[1]).slice(0,20).map(x=>x[1]),document.getElementById('whiteFreqTable'));
buildFreqTable(megaFreq,document.getElementById('megaFreqTable'));
</script>
</body>
</html>
